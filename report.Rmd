---
title: "Arboviral Surveillance and Response Capacity Survey 2021"
output: html_document
params:
  scale: 
    label: "Summary level"
    value: "Global"
    input: select
    choices: ["Global", "Regional", "National"]
  region: 
    label: "Region(s)"
    value: "All"
    input: select
    choices: ["All", "Choose one from list..."]
  country:
    label: "Country level information"
    value: "Anonymize (aggregate all)"
    input: select
    choices: ["Anonymize (aggregate all)","Identify by name"]
  missingness:
    label: "Missingness"
    value: "Exclude missingness"
    input: select
    choices: ["Include missigness", "Exclude missingness"]
---

```{r setup, include=FALSE, echo = FALSE}
# Basic knitr options
library(knitr)
opts_chunk$set(comment = NA, 
               echo = FALSE,
               warning = FALSE, 
               message = FALSE, 
               error = TRUE, 
               cache = FALSE)
               # fig.width = 9.64,
               # fig.height = 5.9,
               # fig.path = 'figures/')
# options(scipen = '999')
```

```{r}

library(tidyverse)
library(stringr)
library(pander)
library(knitr)
library(flextable)
library(lubridate)

# if( file.exists("data/data.RData")){
#   load("data/data.RData")
# } else{
#   message("You need the data!")
# }
# 
# data <- data %>% filter( SI01 == params$country )
# 
# if( file.exists("data/Data_dictionary_Survey375147.csv")){
#   dict <- read_csv("data/Data_dictionary_Survey375147.csv")
# } else{
#   message("You need the data dictionary!")
# }
# 
# # utility function 
# get_responses <- function( question_number ){
#   idx <- which( dict$`Question number` == question_number )
#   var_names <- dict$`Variable name`[idx]
#   responses <- data %>% select( all_of(var_names) )
#   if( !is.na(dict$Subquestion[ idx[1] ]) ){
#     # remove square brackets at beginning and end, then rename columns:
#     colnames( responses ) <- str_extract( dict$Subquestion[idx], '(?<=\\[)[^{}]+(?=\\])')
#   } else{
#     colnames( responses ) <- "Response"
#   }
#   return( responses )
# }

```

# Country selection

`r params$country_selection`

# Summary level

`r params$summary_level`
