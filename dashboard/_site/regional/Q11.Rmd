
#### Reportable diseases by case classification status (ref Q11b, 11c)

```{r}
q11b <- get_responses("11b")
q11b <- cbind(Country = data$SI01, q11b) %>%
  select(-"Other ") %>% 
  pivot_longer(!Country, names_to = "Arbovirus", values_to = "Response")
q11b$Response <- str_to_sentence(gsub("Mandatory reporting of ", "", q11b$Response))
q11b <- q11b %>%
  mutate( Arbovirus = recode_factor(.x = Arbovirus,
                                    "Chikungunya" = "CHIKV",
                                    "Dengue" = "DENV",
                                    "Yellow fever" = "YFV",
                                    "Zika (congenital)" = "ZIKV (C)",
                                    "Zika (non-congenital)" = "ZIKV (NC)")) %>%
  mutate( Response = recode_factor( .x = Response,
                                    "All suspect cases" = "S",
                                    "Confirmed cases only" = "C",
                                    "Not reportable" = "N")) %>%
  pivot_wider(names_from = Arbovirus, values_from = Response) 

q11c <- get_responses("11c")
idx <- which( grepl("Arbovirus",colnames(q11c)))
arboviruses <- cbind( Country=data$SI01, q11c[,idx]) %>%
  pivot_longer(!Country) %>%
  select( Country, Arbovirus=value)
reporting <- cbind( Country=data$SI01, q11c[,-idx]) %>%
  pivot_longer(!Country) %>%
  select( Country, Reporting=value)
idx <- grep("suspect", str_to_lower(reporting$Reporting))
reporting$Reporting[idx] <- " (S)"
idx <- grep("confirm", str_to_lower(reporting$Reporting))
reporting$Reporting[idx] <- " (C)"
idx <- grep("not", str_to_lower(reporting$Reporting))
reporting$Reporting[idx] <- " (N)"
reporting$Reporting[ is.na( reporting$Reporting) ] <- ""
q11c <- cbind(arboviruses, Reporting = reporting$Reporting) %>%
  unite( "Other", Arbovirus:Reporting, sep = "")
idx <- which( q11c$Other == "NA" )
q11c <- q11c[-idx,]
q11c <- q11c %>% 
  group_by( Country ) %>% 
  summarize( Other = paste(Other, collapse=", "))

left_join( q11b, q11c) %>%
  regulartable() %>%
  merge_v(j = ~Country ) %>%
  theme_zebra(odd_header="#048ECA", odd_body = "#D6EAF8") %>% 
  color( color="#FFFFFF", part="header" ) %>% 
  align( j=2:6, align="center", part="all" ) %>%
  padding( padding.top = 10, part="all") %>%
  padding( padding.bottom = 10, part="all") %>%
  autofit()

```

<ul style="margin-left: 40px;">
<li> 
<strong>Case classification status</strong>: S = All suspect cases; C = Confirmed cases only; N = Not reportable
</li>
<li>
<strong>Acronyms</strong>: CCHFV = Crimean Congo haemorrhagic fever virus; CHIKV = chikungunya virus; DENV = dengue virus; EEEV = Eastern equine encephalitis virus; MAYV = Mayaro virus; OROV = Oropouche virus; RVFV = Rift Valley fever virus; SFFV = Sand fly fever virus (Naples, Sicilian); TBEV = Tick-borne encephalitis virus; TOSV = Toscana virus; VEEV = Venezuelan equine encephalitis virus; WNV = West Nile virus; YFV = yellow fever virus
</li>
</ul>

<br>

### Surveillance for human cases of arboviral disease

#### Performance of national epidemiological surveillance for arboviral diseases in humans (ref Q12, 12b, 12c)

```{r}
responses_12 <- get_responses("12") 
responses_12b <- get_responses("12b")
colnames( responses_12b ) <- c("Response", "Other")
responses_12b <- responses_12b %>%
  mutate( Response = factor( replace_na( as.character(Response), ""))) %>%
  mutate( Other = factor( replace_na( as.character(Other), ""))) %>%
  unite( Frequency, Response:Other, sep="") 

responses_12c <- get_responses("12c")
colnames(responses_12c) <- "Type"

cbind(Country = data$SI01, responses_12, responses_12b, responses_12c) %>% 
  rename( "Surveillance conducted" = Response ) %>% 
  regulartable() %>% 
  theme_zebra(odd_header="#048ECA", odd_body = "#D6EAF8") %>% 
  color( color="#FFFFFF", part="header" ) %>% 
  padding( padding.top = 10, part="all") %>%
  padding( padding.bottom = 10, part="all") %>%
  autofit()

```

<br>

### Training sessions for healthcare workers on notification of _Aedes_-borne arboviral diseases

#### Training of healthcare workers on reporting _Aedes_-borne arboviral diseases (ref Q13)

```{r}
responses <- get_responses("13") 
colnames(responses) <- c("Response","Description")
responses <- responses %>%
  mutate(Response = recode_factor(.x=Response,
                                  "Yes. If so, please describe in the comments field:"="Yes",
                                  "No"="No",
                                  "I don't know" ="I don't know")) 
cbind(Country = data$SI01, responses) %>% 
  filter( Response == "Yes") %>% 
  select(-Response) %>%
  replace_na( list(Description = "Conducted (no further description provided)")) %>% 
  rename( "Description of training" = Description) %>%
  regulartable() %>% 
  theme_zebra(odd_header="#048ECA", odd_body = "#D6EAF8") %>% 
  color( color="#FFFFFF", part="header" ) %>% 
  padding( padding.top = 10, part="all") %>%
  padding( padding.bottom = 10, part="all") %>%
  autofit()

```
