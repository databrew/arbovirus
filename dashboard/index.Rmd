---
title: "Global data"
---



```{r setup, include=FALSE, echo = FALSE}
# Basic knitr options
library(knitr)
opts_chunk$set(comment = NA, 
               echo = FALSE,
               warning = FALSE, 
               message = FALSE, 
               error = TRUE, 
               cache = FALSE,
               fig.width = 9.64,
               fig.height = 5.9,
               fig.path = 'figures/')
ggplot2::theme_set(ggplot2::theme_bw())

# options(scipen = '999')
```

```{r, child="_sessioninfo.Rmd"}
```

```{r, echo = FALSE}
source('functions.R')
library(RColorBrewer)
library(scales)
library(leaflet)
load('../arboapp/data/world_shp.rda') # load world shape file
load('../arboapp/data/region_shp.rda')
df <- load_data(modify_variable_names = TRUE)
```

# Responses by country

```{r}
pd <- df[grepl('1. State', names(df))]
names(pd) <- c('country')
pd <- pd %>% filter(!duplicated(country))
pd$value <- 'Responded'
make_map(df = pd,
         pal = 'Dark2',
         qualitative = TRUE,
         provider = providers$OpenStreetMap)
# htmltools::save_html(l, file = '~/Desktop/map1.html')
```

```{r, eval = FALSE}
# Responses by country with Africa filled in
pd <- df[grepl('1. State', names(df))]
names(pd) <- c('country')
pd <- pd %>% filter(!duplicated(country))
pd$value <- 'Responded'
pd2 <- world_shp@data %>%
  filter(REGION == 2) %>%
  dplyr::select(country) %>%
  mutate(value = 'Responded')
pd <- bind_rows(pd, pd2)

l <- make_map(df = pd,
        pal = 'Dark2',
         qualitative = TRUE,
         provider = providers$OpenStreetMap)
l
# htmltools::save_html(l, file = '~/Desktop/map2.html')
```


# Surveillance capacity indicators

### Reportable arboviral diseases

##### 11. Is reporting mandatory for any arboviral disease cases in your country?

```{r}
pd <- df[grepl('11. |1. State', names(df))]
names(pd) <- c('country', 'value')
make_map(df = pd,
         qualitative = TRUE)
```

##### 11b. For which of the following arboviral disease cases is reporting mandatory in your country: Chikungunya

```{r}
# names(df)[grepl('11b', names(df))]
pd <- df[,(grepl('11b.', names(df)) & grepl('Chik', names(df))) | grepl('1. State', names(df))]
names(pd) <- c('country', 'value')
make_map(df = pd,
         qualitative = TRUE)
```


##### 11b. For which of the following arboviral disease cases is reporting mandatory in your country: Dengue

```{r}
# names(df)[grepl('11b', names(df))]
pd <- df[,(grepl('11b.', names(df)) & grepl('Dengue', names(df))) | grepl('1. State', names(df))]
names(pd) <- c('country', 'value')
make_map(df = pd,
         qualitative = TRUE)
```


##### 11b. For which of the following arboviral disease cases is reporting mandatory in your country: Yellow fever

```{r}
# names(df)[grepl('11b', names(df))]
pd <- df[,(grepl('11b.', names(df)) & grepl('Yellow', names(df))) | grepl('1. State', names(df))]
names(pd) <- c('country', 'value')
make_map(df = pd,
         qualitative = TRUE)
```


##### 11b. For which of the following arboviral disease cases is reporting mandatory in your country: Zika (Non-congenital)

```{r}
# names(df)[grepl('11b', names(df))]
pd <- df[,(grepl('11b.', names(df)) & grepl('Zika', names(df))) | grepl('1. State', names(df))]
pd <- pd[,1:2]
names(pd) <- c('country', 'value')
make_map(df = pd,
         qualitative = TRUE)
```

##### 11b. For which of the following arboviral disease cases is reporting mandatory in your country: Zika (Congenital)

```{r}
# names(df)[grepl('11b', names(df))]
pd <- df[,(grepl('11b.', names(df)) & grepl('Zika', names(df))) | grepl('1. State', names(df))]
pd <- pd[,c(1,3)]
names(pd) <- c('country', 'value')
make_map(df = pd,
         qualitative = TRUE)
```


##### 11b. For which of the following arboviral disease cases is reporting mandatory in your country: Other

```{r}
# names(df)[grepl('11b', names(df))]
pd <- df[,(grepl('11b.', names(df)) & grepl('Other', names(df))) | grepl('1. State', names(df))]
names(pd) <- c('country', 'value')
make_map(df = pd,
         qualitative = TRUE)
```


### History of any arbovirus circulation since 2000 

(q5)


### Conducting surveillance on humans

(q12)

### Conducting surveillance on vectors 

(q28) 


### Conducting surveillance on animals 

(q41)

### Training of surveillance personnel and clinicians

(q10) (q24)

### Presence written arbovirus surveillance and control plans

(q6)

### Arbovirus program independent or integrated

(q7)

### Tools for case reporting 

(q9)

# Laboratory diagnostic indicators


### Testing in outbreak vs non-outbreak settings 

(q15)

### Laboratory tests available 

(q17)

### Serotyping and sequencing capacity? 

(q19)


# Response capacity indicators

### Surveillance and control plans available 

(q 6)

### Clinical guidelines for healthcare workers 

(q21)


### Vector control method employed (q35)


### Surveillance and response committee exists (q47)


### Contingency plan exists (q48)


### Most common vector control methods used 

(q35)


### Indicators used for thresholds 

(q37, 37b, 38)


### Insecticide resistance

(q39)

### Criteria for declaring an outbreak

(q49)


# Epidemiological risk data


### Vectors present and level of risk 

(q34, q34b, q34c)

### Entomological surveillance in the last 2 years

(q28)


### How often is conducted

(q28e)


### Vectors recorded in the last 5 years  and the public health threat 

(q34)
(34b, 34c)


### All arboviruses 2015-2020 (cases and deaths) 

(q55, b, c)


### Most recent year data 

(q56)

